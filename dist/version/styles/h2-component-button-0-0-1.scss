// Hydrogen / Components / Button (Versioned)
// This file is processed and built so that the component can be used as an isolated, versioned tool.

// This file is compiled after it's been moved by the Gulp build script because the idea is that you can load the Sass from the versioned node_module OR simply use the compiled CSS if you don't care about themeing the component through Hydrogen.

// Forward the theme variables from the processed, nested core files.
@forward "core/defaults";

// Load map variables from the core module so that the component can leverage them when generating selectors.
@use "core/maps" as maps;

// Load functions from the core module so that the component can leverage them when generating selectors.
@use "core/functions" as fn;

// Load the theme variables from the nested core files so that they can be passed to property mixins.
@use "core/defaults" as var;

// Load the core itself so that its mixins can be accessed and subsequently nested inside the component attribute (this prevents the core from being loaded on the project outside of places it should be).
@use "core/core" as core;

// // Load the component so that its mixins can be accessed.
@use "component-button" as *;

// Load the core and component mixins within the versioned component attribute, while passing them their respective theme variables.
// 0-0-1 is replaced during the Gulp build script with the current component version, set in Gulpfile.js, before Sass is compiled.
[data-h2-button-0-0-1] {
    // Load the component's unique reset styles.
    @include h2ComponentButtonReset();
    // Load the core.
    @include core.h2UniversalReset;
    // Load the generic component mixin.
    @include h2ComponentButtonGeneric($focus-color: var.$focus-color, $gray: var.$gray, $hover-bg-color: var.$hover-bg-color, $hover-font-color: var.$hover-font-color);
}

// Load anchor specific button mixin.
a[data-h2-button-0-0-1] {
    @include h2ComponentButtonAnchor();
}

// Load the custom button styles for both regular buttons and anchors with their respective theme variables.
@each $sizeKey, $sizeValue in maps.$size-map {
    @each $radiusKey, $radiusValue in maps.$radius-map {
        @each $colorKey, $colorValue in maps.$color-map {
            @each $styleKey, $styleValue in maps.$button-type-map {
                [data-h2-button-0-0-1*="#{$colorKey}, #{$radiusKey}, #{$sizeKey}, #{$styleKey}"],
                a[data-h2-button-0-0-1*="#{$colorKey}, #{$radiusKey}, #{$sizeKey}, #{$styleKey}"] {
                    @include h2ComponentButtonCustom($radius: $radiusValue, $style: $styleKey, $color: $colorValue, $white: var.$white, $black: var.$black, $hover-font-color: var.$hover-font-color, $size: $sizeKey, $font-scale-small: var.$font-scale-small, $font-scale-default: var.$font-scale-default, $font-scale-h5: var.$font-scale-h5, $padding: var.$padding);
                    // Frustratingly, you can't pass a function to a mixin? That or the syntax isn't well documented.
                    @if $styleKey == "solid" {
                        color: fn.contrasting-color($colorValue, var.$white, var.$black);
                    }
                }
            }
        }
    }
}